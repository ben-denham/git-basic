<!doctype html>

<!-- vim: noexpandtab:
-->
<!-- TODO
	* How to find documentation
	* make slides for git alias
	* make slides for git grep
	* Convert course into a full day
		* talk about github / maybe setup github accounts & use them in some excercises
		* make slides for .gitignore
		* make slides for rebase
		* Demonstrate interactive rebase
		* Demonstrate some workflows
			* http://git-scm.com/book/en/v2/Git-Branching-Branching-Workflows
		* Expand the syntax for 'preview' page (provide more syntax)
		* Demonstrate gitk & git gui working together
		* ..working multiple remotes
		* HOWTO: delete from remote
		* HOWTO: abort a merge / rebase
		* bare repositories (what are they, how to do it)
		* problem solving excercises
			* Go back to a point in time, commit something new and push as a new branch
			* Join two repositoies together
			* interactive rebases (creating new branches)
				* Go back to a point in time, remove a commit
				* Go back to a point in time, amend a commit
				* reorder some commits
				* decide the rebase is to hard, abort
-->
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Git - Revision control for humans</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">
		<meta name="author" content="Catalyst IT Ltd">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section> <!-- Introduction -->
					<section>
						<h1>Git</h1>
						<h2>Revision control for humans</h2>

						<small>The presentation content is licensed under a Creative Commons Attribution 3.0 License. (http://creativecommons.org/licenses/by/3.0)</small>
						<small>The presentation display is licensed seperately by <a href="http://hakim.se">Hakim El Hattab</a> / <a href="http://twitter.com/hakimel">@hakimel</a></small>

						<hr>
						<small>
						<!-- Well lit room? Light theme -->
						Theme: <a href="?theme=moon">Dark</a>
							/ <a href="?theme=solarized">Light</a>
						</small>
						<aside class="notes">
							# Make sure the server has a working SSH daemon running
							<br>
							<br># Set up shared git repo
							<br>mkdir /tmp/test2.git
							<br>cd /tmp/test2.git
							<br>git init --bare
							<br>cd /tmp
							<br>git clone /tmp/test2.git /tmp/work
							<br>cd /tmp/work
							<br>echo 'evanwashere' > evan.txt
							<br>git add  evan.txt
							<br>git commit -m 'initial commit - one file'
							<br>git push origin master
						</aside>
					</section>
					<section>
					<div data-markdown>
						## Introduction
						* The format of this course is mostly a tutorial
						  (with some lecturing thrown in)
						* The tutorial uses a linux command line, but git
						  is available on other platforms
						* The tutorial is designed to uncover the concepts
						* Not necessarily to provide all the command syntax
						 * Hopefully if you are armed with the concepts, the
						   internet will help you find the specifics you need
					</div>
					</section>
				</section>

				<section> <!-- Why -->
					<section>
					<div data-markdown>
						## Why use revision control software?
						#### You (should) want it if...
						* You are sick of keeping *.bak files
						* You might ever want to look at how something used to be
						* You might ever want to know why something changed
						* You might like to review what you have just changed
					</div>
					</section>
					<section>
					<div data-markdown>
						## Why use revision control software?
						#### You need it if...
						* You are working with other people who use it
						* You want to maintain multiple versions of the same thing
						* You want to work on separate changes at the "same time"
						* You need to make a single change which covers several files - and keep things in sync
					</div>
					</section>
					<section>
					<div data-markdown>
						## What does revision control provide?
						* Track changes (to almost anything)
						* View history
						* Look back to find when bugs were created
						* Find the reasoning behind why something is how it is
						* Roll back changes
						* Apply kudos for effort
						* Backups of your important stuff
					</div>
					</section>
					<section>
					<div data-markdown>
						## What options are there?
						* RCS
						* CVS
						* Subversion
						* Darcs
						* Perforce
						* Bzr
						* ...
					</div>
					</section>
					<section>
					<div data-markdown>
						## Why should you use Git?
						* It is fast
						* Branching is trivial
						* Merging of branches actually makes sense
						* You can be disconnected from the network, yet still continue working
						* It does not dictate your workflow
						* [It protects your data](http://git-scm.com/about/info-assurance)
						* Once you master the concepts, you can do some really creative (and useful!) stuff
						* The cool kids use it
					</div>
					</section>
				</section>

				<section> <!-- Installing -->
					<section>
					<div data-markdown>
						## Installing
						```bash
						# Required
						$ sudo aptitude install git
						```
						```bash
						# Recommended
						$ sudo aptitude install gitk git-gui
						```
						```bash
						# FYI...
						$ sudo aptitude search git
						```
					</div>
						<aside class="notes">
							Pause here to explain the way we are showing commands
							- talk about '$' as the prompt, etc
						</aside>
					</section>
					<section>
					<div data-markdown>
						## Installing (alternative OS)
						* Go to [git-scm.org](http://git-scm.org "The home of git") 
						* Find the [Install instructions](http://git-scm.com/book/en/Getting-Started-Installing-Git "Find the install instructions")
						* Which will lead you to [the windows package](http://msysgit.github.io/)
						* Once you have it installed, you are looking for "Git BASH"
					</div>
					</section>
				</section>

				<section> <!-- Init -->
					<section>
					<div data-markdown>
						## Create a new repository
						Use ```git init```
						```bash
						$ mkdir /tmp/test
						```
						```bash
						$ cd /tmp/test
						```
						```bash
						$ git init
						Initialized empty Git repository in .git/
						```
						Check the status with ```git status```
						```bash
						$ git status
						# On branch master
						#
						# Initial commit
						#
						nothing to commit (create/copy files and use "git add" to track)
						```
					</div>
					</section>
				</section>

				<section> <!-- Configuring -->
					<section>
					<div data-markdown>
						## Global configuration settings
						This will stop Git nagging you later
						```bash
						$ git config --global user.name "Your Name"
						$ git config --global user.email "null@catalyst.net.nz"
						```
						If you think ```nano``` is crap, you can choose vim, or gedit
						```bash
						$ git config --global core.editor gedit
						```
					</div>
					</section>
					<section>
					<div data-markdown>
						## Project configuration settings
						This will tell Git you like to see pretty colours on the screen
						```bash
						$ git config color.ui always
						```
					</div>
					<aside class="notes">
						These settings will override the global settings

						- but only within the current repository (which is /tmp/test)
					</aside>
					</section>
					<section>
					<div data-markdown>
						## Accessing the configuration settings
						Global data is stored in ```$HOME/.gitconfig```

						Project data is stored in ```$PROJECT/.git/config```

						Use ```git config``` to see it
						```bash
						$ git config -l
						```
						..or just edit the files
						```bash
						$ gedit ~/.gitconfig /tmp/test/.git/config
						```
					</div>
					</section>
				</section>

				<section> <!-- Concepts 1 -->
					<div data-markdown>
					## Some concepts to begin with
					Git is just a bit different from other revision control systems
					![overview](images/local-remote-small.png "overview")

					</div>
					<aside class="notes">
						The 'staging area' is often called the 'index'
					</aside>
				</section>

				<section> <!-- Basic use ... -->
					<section>
					<div data-markdown>
						## Managing Files - Add
						Make some changes...
						```bash
						$ touch super-script.pl
						```
						```bash
						$ git status
						# On branch master
						#
						# Initial commit
						#
						# Untracked files:
						#   (use "git add &lt;file>..." to include in what will be committed)
						#
						#	super-script.pl
						nothing added to commit but untracked files present (use "git add" to track)
						```
					</div>
					</section>
					<section>
					<div data-markdown>
						## Tell Git to track those files
						Use ```git add```
						```bash
						$ git add super-script.pl 
						```
						```bash
						$ git status
						# On branch master
						#
						# Initial commit
						#
						# Changes to be committed:
						#   (use "git rm --cached &lt;file>..." to unstage)
						#
						#	   new file: super-script.pl
						#
						```
					</div>
					</section>
					<section>
					<div data-markdown>
						## Change an existing file
						Make some changes...
						```bash
						$ echo DATA > super-script.pl
						```
						```bash
						$ git status
						# On branch master
						#
						# Initial commit
						#
						# Changes to be committed:
						#   (use "git rm --cached &lt;file>..." to unstage)
						#
						#	new file:   super-script.pl
						#
						# Changed but not updated:
						#   (use "git add &lt;file>..." to update what will be committed)
						#   (use "git checkout -- &lt;file>..." to discard changes in working directory)
						#
						#	modified:   super-script.pl
						#
						```
					</div>
					</section>
					<section>
					<div data-markdown>
						## Change an existing file
						We need to tell Git that you intend to commit the checked out
						version, with ```git add```
						```bash
						$ git add super-script.pl 
						```
						```bash
						$ git status
						# On branch master
						#
						# Initial commit
						#
						# Changes to be committed:
						#   (use "git rm --cached &lt;file>..." to unstage)
						#
						#	new file:   super-script.pl
						#
						```
					</div>
					</section>
					<section>
					<div data-markdown>
						## Committing changes
						We need to commit our changes to make them permanent.

						Commit with ```git commit```
						```bash
						$ git commit super-script.pl 
						Created commit ae54011: Add a message.
						1 files changed, 3 insertions(+), 0 deletions(-)
						create mode 100644 super-script.pl
						```
						You will be stuck in an editor so you can input a commit message
						Normally, you WILL make your commit message meaningful
					</div>
						<aside class="notes">
						We have told git about our changes, but
						we haven't actually committed anything yet.<br>

						This is deliberate - so you can build up more complex commits.
						</aside>
					</section>
					<section>
					<div data-markdown>
						## Committing changes - some options
						You don't have to ```git add``` all your changes manually
						```bash
						$ git commit &lt;file>
						```
						```bash
						$ git commit -a
						```
						You can have an easier editor...
						```bash
						$ EDITOR=gedit git commit -a
						```
						You don't have to use an editor at all...
						```bash
						$ git commit -m 'commit message goes here'
						```
					</div>
					</section>
					<section>
					<div data-markdown>
						## Managing Files - Permissions
						Oops, that file isn't executable
						```bash
						$ chmod 755 super-script.pl 
						```
						```bash
						$ git commit super-script.pl 
						Created commit 378af93: Make it executable.
						0 files changed, 0 insertions(+), 0 deletions(-)
						mode change 100644 => 100755 super-script.pl
						```
					</div>
					</section>
					<section>
					<div data-markdown>
						## Managing Files - Move
						To rename a file use ```git mv```
						```bash
						$ git mv super-script.pl silly-script.pl
						```
						```bash
						$ git status
						# On branch master
						# Changes to be committed:
						#   (use "git reset HEAD &lt;file>..." to unstage)
						#
						#	   renamed:	super-script.pl -> silly-script.pl
						#
						```
						This has changed our checkout, and the index, so we are ready to
						commit the change
						```bash
						$ git commit
						Created commit fabd446: Rename the file.
						1 files changed, 0 insertions(+), 0 deletions(-)
						rename super-script.pl => silly-script.pl (100%)
						```
					</div>
					</section>
					<section>
					<div data-markdown>
						## Managing Files - Delete
						To delete a file use ```git rm```
						```bash
						# This won't actually work, because we haven't
						# created "another-script.pl"
						# ... but you can try it, if you like....
						$ git rm -f another-script.pl 
						```
						```bash
						$ git status
						# On branch master
						# Changes to be committed:
						#   (use "git reset HEAD &lt;file>..." to unstage)
						#
						#	   deleted:	another-script.pl
						#
						```
						<li>And commit the change</li>
						```bash
						$ git commit
						Created commit bd10c5f: Remove another-script.pl
						0 files changed, 0 insertions(+), 0 deletions(-)
						delete mode 100644 another-script.pl
						```
					</div>
					</section>
				</section>

				<section> <!-- Viewing changes ... -->
					<section>
					<div data-markdown>
						## Change Logs
						Use ```git log```
						```bash
						$ git log
						commit 09f90bc2a74f7ca2f825c4a386e168649b9fec97
						Author: Evan Giles <evan@catalyst.net.nz>
						Date:   Thu Dec 16 11:53:48 2010 +1300

							Rename the file.

						commit f7123c5ffdccbed11b50b0b74a181186e1a13028
						Author: Evan Giles <evan@catalyst.net.nz>
						Date:   Thu Dec 16 11:53:25 2010 +1300

							Make it executable

						commit 8657bea3230587abdcbe39e6bf699c9ee8f505a6
						Author: Evan Giles <evan@catalyst.net.nz>
						Date:   Thu Dec 16 11:52:51 2010 +1300

							Add a message.
						```
						By default the output is piped into $PAGER
					</div>
					</section>
					<section>
					<div data-markdown>
						## Change Logs
						You can also specify a file or directory
						```bash
						$ git log silly-script.pl 
						```
					</div>
					</section>

					<section>
					<div data-markdown>
						## Change Logs - Annotate
						Show who made changes to what line

						Also known as the blame log
						```bash
						$ git blame silly-script.pl
						b61863c8 (Andrew Ruthven 2008-05-09 17:01:41 +1200 1) #!/usr/bin/perl -w
						b61863c8 (Andrew Ruthven 2008-05-09 17:01:41 +1200 2) 
						b61863c8 (Andrew Ruthven 2008-05-09 17:01:41 +1200 3) print "silly script\n";
						9c08faf4 (Bad Coder	  2008-05-09 17:18:18 +1200 4) I'm in ur code, breaking ur stuff.
						```
						Who is this Bad Coder fella?
					</div>
					</section>

					<section>
					<div data-markdown>
						## Change logs - GUI
						Not strictly change logs, but...  gitk / qgit / gitg / etc
						![image](images/gitk.png "gitk")
					</div>
					</section>
				</section>

				<section> <!-- Concepts 2 ... -->
					<section>
					<div data-markdown>
						## Some more concepts - commits
						* It is important to understand that git thinks in ```commits```
						* Each commit refers to a previous commit (its parent)
						* Commits can be referenced by their SHA1 checksum
							* or an abbreviation of it
							* or by a number of things that might refer to them
						* ```gitk``` lets you visualise the commit history, which
							helps a lot
					</div>
					</section>
					<section> 
						<h2>Commits are....</h2>
						<marquee style="width:650" scrollamount="650" scrolldelay="500">Totally unchangeable</marquee>
					</section>
				</section>

				<section> <!-- branching and merging -->
					<section>
					<div data-markdown>
						## Branching - List
						To show branches use ```git branch```
						```bash
						$ git branch
						* master
						```
						Only one branch, called ```master```

						The '*' indicates that it is your current branch
					</div>
						<aside class="notes">
							You can also use 'git status'
						</aside>
					</section>

					<section>
					<div data-markdown>
						 ## Branching - Create
						Use ```git branch``` (or ```git checkout -b```)
						```bash
						$ git checkout -b new-branch
						Switched to a new branch "new-branch"
						```
						Will create "new-branch", and check it out for you
						```bash
						$ git branch
						  master
						* new-branch
						```
					</div>
						<aside class="notes">
						mention that 'git checkout' is a convenience interface
						...it does several things in one step
						</aside>
					</section>

					<section>
					<div data-markdown>
						## Branching - Create somewhere else
						By default a new branch will be created at the commit you
						already have checked out

						You can also create a new branch at another commit
						```bash
						$ git checkout -b another-branch master
						Switched to a new branch "another-branch"
						```
						```bash
						$ git branch
						* another-branch
						  master
						  new-branch
						```
					</div>
						<aside class="notes">
						Here, the checkout command is actually doing 3 things<br>
						- go the the master branch<br>
						- make a branch there (callled 'another-branch')<br>
						- checkout the 'another-branch' branch
						</aside>
					</section>

					<section>
					<div data-markdown>
						## Branching - Change Branch
						Use ```git checkout```
						```bash
						$ git checkout new-branch
						Switched to branch "new-branch"
						```
						```bash
						$ git branch
						  another-branch
						  master
						* new-branch
						```
						Don't forget to see how this is shown in ```gitk```
					</div>
					</section>

					<section>
					<div data-markdown>
						## Branching - What's the deal?
						```bash
						# Make a change to a file (and commit that change)
						$ echo "... From new-branch" >> silly-script.pl 
						$ git commit silly-script.pl 
						Created commit a6ed2cf: From new-branch
						1 files changed, 1 insertions(+), 0 deletions(-)
						```
						```bash
						# Check the file..
						$ cat silly-script.pl 
						DATA
						... From new-branch
						```
						```bash
						# Jump to another branch
						$ git checkout master
						Switched to branch "master"
						```
						```bash
						# The text we added ain't there
						$ cat silly-script.pl 
						DATA
						```
					</div>
					</section>

					<section>
					<div data-markdown>
						## Branching - Why?
						* Many (most) projects have a branch for each release
						* Branches are useful for experimental features / refactoring
						* Branches happen (without even trying) when several people try
						  to work on the same project - but I'll explain that soon ;)
					</div>
						<aside class="notes">
							It is useful to think of branches as an 'alternative reality'
						</aside>
					</section>

					<section>
					<div data-markdown>
						## Merging - Simple Case
						You should now be on the master branch
						```bash
						$ git status
						# On branch master
						nothing to commit (working directory clean)
						```
						Use ```git merge```
						```bash
						$ git merge new-branch
						Updating e766bfb..a6ed2cf
						Fast forward
						silly-script.pl |	1 +
						1 files changed, 1 insertions(+), 0 deletions(-)
						```
						In this case, we have done a ```fast forward``` merge

						If there are no conflicts, this may make a new commit object

						use ```gitk``` to see what happened
					</div>
						<aside class="notes">
						* We are merging changes *IN*, from somewhere else<br>
						* explain the fast forward bit<br>
						* talk about merges being line by line, so not for binary data
						</aside>
					</section>

					<section>
					<div data-markdown>
						## Merging - get ready for a conflict
						Conflicts are more difficult (lets create one)
						```bash
						# Make a change to a file, commit that change to 'master'
						$ echo "New value for data" > silly-script.pl
						$ git commit -a -m 'update script with a new value'

						# Change branches, make a change, and commit
						$ git checkout new-branch
						$ echo "different value for data" > silly-script.pl
						$ git commit -a -m 'update script with a different value'

						# Go back to the master branch, if we try to merge - there
						# will be a problem!
						$ git checkout master
						```
					</div>
						<aside class="notes">
							Sorry about the wall of text!
						Also, explain the fast forward bit
						</aside>
					</section>

					<section>
					<div data-markdown>
						## Merging - you can't do that
						If there is a conflict then git will stop and make you fix it.
						```bash
						$ git merge new-branch
						Auto-merged silly-script.pl
						CONFLICT (content): Merge conflict in silly-script.pl
						Automatic merge failed; fix conflicts and then commit the result.
						```
						```bash
						$ git status
						# On branch master
						# Unmerged paths:
						#   (use "git add/rm &lt;file>..." as appropriate to mark resolution)
						#
						#	   both modified:	  silly-script.pl
						#
						no changes added to commit (use "git add" and/or "git commit -a")
						```
						```bash
						$ cat silly-script.pl 
						&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:silly-script.pl
						New value for data
						=======
						different value for data
						>>>>>>> new-branch:silly-script.pl
						```
					</div>
					</section>

					<section>
					<div data-markdown>
						## Merging - Fixing conflicts
						Lots of tools to help fix things up.  Hand edit, xxdiff,
						smartmerge, etc

						We'll just fix it by editing the file
						```bash
						$ gedit silly-script.pl 
						$ cat silly-script.pl 
						New, different value for data
						```
						But Git still won't allow us to continue...
						```bash
						$ git commit
						U	silly-script.pl
						fatal: 'commit' is not possible because you have unmerged files.
						Please, fix them up in the work tree, and then use 'git add/rm &lt;file>' as
						appropriate to mark resolution and make a commit, or use 'git commit -a'.
						```
					</div>
					</section>

					<section>
					<div data-markdown>
						## Merging - Success at last
						We need to tell Git that it has been fixed before we commit
						```bash
						$ git add silly-script.pl 
						$ git commit
						Created commit a411f2a: Merge branch 'new-branch'
						```
						In this case the commit message is automatically created, but
						you can edit it if you want.
						```bash
						Merge branch 'new-branch'

						Conflicts:

							silly-script.pl
						```
					</div>
					</section>

					<section>
					<div data-markdown>
						## Merging - How does it look?
						Looking at the trees in gitk helps you understand stuff.
						```bash
						gitk
						```
					</div>
					</section>
				</section>

				<section> <!-- Where are we? Where are we going? -->
					<section>
						<h2>A quick recap</h2>
						<img src="images/local.png" alt="">
					</section>
					<section>
						<h2>Sharing your changes with others</h2>
						<img src="images/local-remote.png" alt="">
						<aside class="notes">
							Finish with: What is the opposite of push?
						</aside>
					</section>
					<section>
						<h2>A gentle recommendation...</h2>
						<ul>
						<li>git push</li>
						<li>git fetch</li>
						<li><del>git pull</del> git fetch; git merge</li>
						</ul>
					</section>
				</section>

				<section> <!-- Ways to work -->
					<section>
						<h2>Ways to work with git (1)</h2>
						<ul>
						<li>Corporate Workflow</li>
						<img src="images/workflow-a.png" alt="corporate">
						<li>Catalyst uses this a lot</li>
						<li>You will use this</li>
					</ul>
					</section>
					<section>
						<h2>Ways to work with git (2)</h2>
						<ul>
						<li>Integration Manager Workflow</li>
						<img src="images/workflow-b.png" alt="github">
						<li>A quick diversion: http://www.github.com</li>
					</ul>
					</section>
					<section>
						<h2>Ways to work with git (3)</h2>
						<ul>
						<li>Dictator Workflow</li>
						<img src="images/workflow-c.png" alt="linux">
						<li>This is how the Linux kernel is managed</li>
					</ul>
					</section>
					<section>
						<h2>Ways to work with git (4)</h2>
						<ul>
						<li>Peer to peer Workflow</li>
						<img src="images/workflow-d.png" alt="p2p">
					</ul>
					</section>
				</section>

				<section>
					<section>
					<div data-markdown>
						## Creating Repositories - Revisited
						We already know how to create a new repositry
						```bash
						$ git init
						Initialized empty Git repository in .git/
						```
						...but normally, you want to join in with an existing project
					</div>
					</section>
					<section>
					<div data-markdown>
						## Clone an existing repository
						In practise, you're more likely to use ```git clone```

						To check out the source code of a random project
						```bash
						$ cd /tmp
						```
						```bash
						$ git clone https://github.com/libgit2/libgit2
						Cloning into libgit2...
						remote: Counting objects: 90, done.
						remote: Compressing objects: 100% (43/43), done.
						remote: Total 90 (delta 44), reused 90 (delta 44)
						Receiving objects: 100% (90/90), 31.62 KiB, done.
						Resolving deltas: 100% (44/44), done.
						```
						```bash
						$ cd libgei2
						```
						```bash
						$ ls 
						```
						```bash
						$ gitk 
						```
					</div>
						<aside class="notes">
						git remote<br>
						git remote -v<br>
						</aside>
					</section>
					<section>
					<div data-markdown>
						## Remote repositories - URLs
						Clone an existing repository via HTTP
						```bash
						$ git clone http://git.catalyst.net.nz/git.git
						```
						Clone an existing repository via SSH
						```bash
						$ git clone ssh://git.catalyst.net.nz/git/public/git.git
						```
						Clone an existing local repository (this is just a bit mad)
						```bash
						$ git clone test test2
						```
						</div>
					</section>
					<section>
					<div data-markdown>
						## Remote branches
						Remote branches are references (pointers) to the state of
						branches in your remote repositories.
						
						They're local branches
						that you can't move; they're moved automatically for you
						whenever you do any network communication.
						
						Remote branches act
						as bookmarks to remind you where the branches on your remote
						repositories were the last time you connected to them.
						</div>
					</section>
					<section>
					<div data-markdown>
						## Origin
						You can see all branches (including the remote ones) with the
						```git branch``` command
						```bash
						$ git branch -a
						* master
						  remotes/origin/master
						```
						</div>
						<aside class="notes">
						origin is not special<br>
						you don't need to type 'remotes' to refer to these branches
						</aside>
					</section>
				</section>

				<section> <!-- Alice and Bob -->
					<section>
						<h2>Once upon a time....</h2>
						<p>.. Alice and Bob wanted to do some work</p>
						<img src="images/lastthing1.png" alt="">
					</section>

					<section>
						<h2>So they both made some changes....</h2>
						<img src="images/lastthing2.png" alt="">
					</section>

					<section>
						<h2>Alice pushes her changes...</h2>
						<img src="images/lastthing3.png" alt="">
					</section>

					<section>
						<h2>But Bob has a problem...</h2>
						<img src="images/lastthing3a.png" alt="">
					</section>

					<section>
						<h2>Now Bob needs to fetch the changes from Alice</h2>
						<img src="images/lastthing4.png" alt="">
					</section>

					<section>
						<h2>and merge them with his work</h2>
						<img src="images/lastthing5.png" alt="">
					</section>

					<section>
						<h2>They all lived happily ever after...</h2>
						<img src="images/lastthing6.png" alt="">
					</section>

					<section>
					<div data-markdown>
						## Now we can try it
						```bash
						# Clone a new repository
						$ cd /tmp
						$ git clone $IP:/tmp/test2.git
						$ cd /tmp/test2
						```
						```bash
						# Create a new file (and commit)
						$ gedit $YOURNAME.txt
						$ git add $YOURNAME.txt
						$ git commit
						```
						```bash
						# Push your changes to the shared repository
						$ git push origin master
						```
						```bash
						# You are now Bob!
						$ git fetch
						$ git merge origin/master
						```
					</div>
						<aside class="notes">
						Explain What is going on with "origin" and "master" here:<br>
						- git push origin master<br>
						- git merge origin/master
						</aside>
					</section>
				</section>

				<section> <!-- Stuff we have missed ... -->
					<section>
					<div data-markdown>
						## Tags
						Tags work pretty much like you would expect.
						They allow you to mark specific points in
						history as being important.
						
						Often people use this functionality to mark release points.
						```bash
						$ git tag v1.0
						$ git tag v1.0-production -m 'this might be important later!'
						```
						```bash
						$ git tag
						$ git show v1.0
						$ git show v1.0-production
						```
					</div>
						<aside class="notes">
						2 types of tags: lightweight and annotated<br>
						Tags don't get shared, by default.<br>
						</aside>
					</section>
					<section>
					<div data-markdown>
						## Changing your commits
						You can 'change' the most recent commit using ```git commit```
						```bash
						$ git add something.txt
						$ git commit --amend
						```
						This is quite a big deal...
					</div>
						<aside class="notes">
						Will someone please pull me up on this?!<br>
						Explain how this works<br>
						- That you are not changing anything here<br>
						- just making a new commit which is quite like the old one<br>
						- and then moving the labels around<br>
						Warning:<br>
						- Do not change commits that exist outside your repository.<br>
						- If you do, people will hate you, and you'll be scorned
						  by friends and family.<br>
						</aside>
					</section>
					<section>
					<div data-markdown>
						## Copy a commit
						You can copy a commit from one branch to another

						You might want to do this if, for example, a bug is discovered
						on your development branch that also needs to be applied to you 
						production branch.
						```bash
						$ git cherry-pick e43a6fd3e94888d76779ad79fb568ed180e5fcdf
						```
					</div>
						<aside class="notes">
						Note that the commit created will look the same, but have a
						different commit id<br>
						Note that the cherry-pick can fail, if there are conflicts<br>
						</aside>
					</section>
					<section>
					<div data-markdown>
						## Undo a commit
						You can undo a previous commit with ```git revert```.

						This makes a new commit, that is the exact opposite of a
						previous commit in your repository.

						The previous commit remains intact.
						```bash
						$ git revert e43a6fd3e94888d76779ad79fb568ed180e5fcdf
						```
						```bash
						$ git log --pretty=oneline
						830d77273fc24c0708403102a05a5a5ffecfce93 Revert "Introduce bug"
						d7a1ee454168081227ee82c5f11bb08f77e2643d Unrelated change
						e43a6fd3e94888d76779ad79fb568ed180e5fcdf Introduce bug
						```
					</div>
						<aside class="notes">
						When you revert the commit, you get dropped into an editor
						in case you want to can edit the commit message..<br>
						</aside>
					</section>
					<section>
					<div data-markdown>
						## Getting serious with copying commits
						As an alternative to merging, you can use ```git rebase```.

						Instead of making a new commit which joins two branches together,
						it copies your changes on top of the other branch...

						You use it just like a merge.
						```bash
						$ git rebase origin/master
						```
					</div>
					</section>
					<section>
					<div data-markdown>
						## Rebase vs. Merge

						One point of view on this is that your repository's commit
						history is a record of what actually happened. It's a historical
					    document, valuable in its own right, and shouldn't be tampered
						with. From this angle, changing the commit history is almost
						blasphemous; you're lying about what actually transpired. So 
						what if there was a messy series of merge commits? That's how 
						it happened, and the repository should preserve that for
						posterity.

						The opposing point of view is that the commit history is the
						story of how your project was made. You wouldn't publish the
						first draft of a book, and the manual for how to maintain your
						software deserves careful editing. This is the camp that uses
						tools like rebase and filter-branch to tell the story in the
						way that's best for future readers.
					</div>
						<aside class="notes">
						Repeat:<br>
						You should not change commits that have been shared with others
						</aside>
					</section>
					<section>
					<div data-markdown>
						## A more advanced rebase
						```bash
						$ git rebase --interactive origin/master
						```
						```bash
						pick a3895fe Try a bit harder to return a useful value from all methods
						pick 180e665 Release engineering (0.8)
						pick 2a6d832 Update Build.PL for newer build tools
						pick e1fac16 Use semantic versioning (http://semver.org/)

						# Rebase aa8a695..e1fac16 onto aa8a695
						#
						# Commands:
						#  p, pick = use commit
						#  r, reword = use commit, but edit the commit message
						#  e, edit = use commit, but stop for amending
						#  s, squash = use commit, but meld into previous commit
						#  f, fixup = like "squash", but discard this commit's log message
						#  x, exec = run command (the rest of the line) using shell
						#
						# These lines can be re-ordered; they are executed from top to bottom.
						#
						# If you remove a line here THAT COMMIT WILL BE LOST.
						# However, if you remove everything, the rebase will be aborted.
						#
						```
					</div>
					</section>
				</section>

				<section> <!-- Wrap up -->
					<section>
					<div data-markdown>
						## Loose ends...
						* git reset
						* git stash
						* git clean
					</div>
					</section>
					<section>
					<div data-markdown>
						## Graphical interfaces!
						* Changes with gitk
						* git gui
					</div>
					</section>

					<section>
						<h2>The End</h2>
						<p>Questions?</p>
						<ul>
						<li><a href="http://git-scm.com/about">The official Git site</a></li>
						<li><a href="http://git-scm.com/about/info-assurance">Data Assurance</a></li>
						<li><a href="http://web.archive.org/web/20090419122050/swxruby.org/git-cheat-sheet.pdf">Cheat sheet</a></li>
						<li><a href="http://www.github.com">Github</a></li>
						</ul>
					</section>
				</section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
